#!/usr/bin/env bash

docker exec -i --user postgres hellopatient_db_1 createdb hellopatientdb

docker exec -i --user postgres hellopatient_db_1 psql hellopatientdb -a  <<__END
create user patient_role password 'patient123';
__END

docker exec -i hellopatient_db_1 psql -Upatient_role hellopatientdb -a <<__END
drop table if exists patient;
 
create table patient (
  id int generated by default as identity primary key,
  name text not null,
  age float not null);

insert into patient(name, age)
  values('John Doe', 35.),
        ('Jane Anderson', 30.),
        ('Baby Driver', 0.4);       

__END
